const fs = require("fs");
const path = require("path");

// Use process.env.GITHUB_WORKSPACE to access the GITHUB_WORKSPACE environment variable
const filePath = path.join(
  process.env.GITHUB_WORKSPACE || "",
  "src/backdoor-demo/test.js"
);

fs.readFile(filePath, "utf8", function (err, data) {
  if (err) {
    return console.log(err);
  }
  // Prepend the string to the existing content
  const result = `// This is a preinstall modification\n${data}`;

  fs.writeFile(filePath, result, "utf8", function (err) {
    if (err) return console.log(err);
  });
});
